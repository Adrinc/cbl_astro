<button data-confetti-button >EL numero es: </button>

<script transition:persist>
  if (typeof window['numero'] === 'undefined') {
    window['numero'] = 0;
  }

  function incrementarNumero() {
    console.log(window['numero']++);
  }

  function actualizarTextoBoton() {
    const buttons = document.querySelectorAll('[data-confetti-button]');
    buttons.forEach((button) => {
      button.textContent = 'EL numero es: ' + window['numero'];
    });
  }

  document.addEventListener('astro:page-load', () => { 
    actualizarTextoBoton();
    const buttons = document.querySelectorAll('[data-confetti-button]');

    buttons.forEach((button) => {
      // Elimina el controlador de eventos existente
      button.removeEventListener('click', incrementarNumero);

      // AÃ±ade el controlador de eventos
      button.addEventListener('click', incrementarNumero);
      button.addEventListener('click', actualizarTextoBoton);
    });
  });
</script>

<style>
  [data-confetti-button] {
    background-color: #f5f5f5;
    border: 1px solid #ccc;
    border-radius: 4px;
    color: #333;
    cursor: pointer;
    font-size: 1rem;
    padding: 0.5rem 1rem;
    height: 200px;
  }
</style>